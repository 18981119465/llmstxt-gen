# llms.txt-gen 系统架构设计文档 - 系统总体架构

*版本：v1.0*  
*生成日期：2025-01-05*  

---

## 1. 系统总体架构

### 1.1 架构模式选择

**选择的架构模式**：模块化单体架构（Modular Monolith）

**选择理由**：
- MVP阶段开发效率更高，团队规模较小（3-5人）
- 部署和运维复杂度较低，适合快速迭代
- 保留未来向微服务架构演进的可能性
- 组件间通信开销小，性能更好

**演进路径**：
- 阶段1：模块化单体（MVP）
- 阶段2：核心服务拆分（Post-MVP）
- 阶段3：完整微服务架构（生产规模化）

### 1.2 系统组件图

```
┌─────────────────────────────────────────────────────────────────┐
│                        Load Balancer (Nginx)                     │
└─────────────────────────┬───────────────────────────────────────┘
                         │
              ┌──────────┴──────────┐
              │   Reverse Proxy      │
              │    (SSL Termination) │
              └──────────┬──────────┘
                         │
┌────────────────────────┴────────────────────────┐
│              llms.txt-gen Application             │
│  ┌─────────────────────────────────────────────┐ │
│  │              Frontend Service                │ │
│  │         (React + Next.js)                   │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │              Backend API                     │ │
│  │            (FastAPI + Python)               │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │           Document Processing                │ │
│  │    (Multi-format Parser + Chunking)         │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │            Web Crawling                      │ │
│  │          (crawl4ai + Async)                 │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │             AI Service                       │ │
│  │         (OpenAI API Integration)            │ │
│  └─────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────┐ │
│  │          HTTP Content Service               │ │
│  │      (Document Access API)                  │ │
│  └─────────────────────────────────────────────┘ │
└────────────────────────┬─────────────────────────┘
                         │
┌────────────────────────┴─────────────────────────┐
│                  Data Layer                       │
│  ┌─────────────────┐  ┌─────────────────┐        │
│  │   PostgreSQL   │  │   File System   │        │
│  │   (Metadata)   │  │ (Documents)     │        │
│  └─────────────────┘  └─────────────────┘        │
│  ┌─────────────────┐  ┌─────────────────┐        │
│  │     Redis       │  │   Vector DB      │        │
│  │    (Cache)      │  │  (Embeddings)    │        │
│  └─────────────────┘  └─────────────────┘        │
└─────────────────────────────────────────────────┘
```

### 1.3 核心服务模块

#### 1.3.1 前端服务 (Frontend Service)
- **技术栈**：React 18 + TypeScript + Next.js 14
- **主要功能**：用户界面、文档上传、配置管理、任务监控
- **关键特性**：响应式设计、Airbnb风格UI、实时状态更新

#### 1.3.2 后端API服务 (Backend API Service)
- **技术栈**：Python 3.9+ + FastAPI + Pydantic
- **主要功能**：RESTful API、用户认证、请求处理、业务逻辑
- **关键特性**：自动API文档、异步处理、数据验证

#### 1.3.3 文档处理引擎 (Document Processing Engine)
- **技术栈**：Python + PyPDF2 + python-docx + BeautifulSoup
- **主要功能**：多格式文档解析、内容提取、智能分块
- **关键特性**：格式转换、内容清洗、语义分块

#### 1.3.4 网站爬取系统 (Web Crawling System)
- **技术栈**：Python + crawl4ai + aiohttp
- **主要功能**：网站内容爬取、增量更新、反爬虫处理
- **关键特性**：异步爬取、内容质量评估、合规性检查

#### 1.3.5 AI智能处理服务 (AI Processing Service)
- **技术栈**：Python + OpenAI API + LangChain
- **主要功能**：内容分析、智能优化、格式转换
- **关键特性**：成本控制、质量评估、批量处理

#### 1.3.6 HTTP内容服务 (HTTP Content Service)
- **技术栈**：Python + FastAPI + SQLite
- **主要功能**：文档内容访问、检索API、格式化输出
- **关键特性**：高性能、多格式支持、访问控制

---

*文档分片自：docs/architecture.md - 第1部分*